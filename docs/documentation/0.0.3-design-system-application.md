---
title: Design System Application
version: 0.0.3
date: 2025-11-22
status: active
---

# Design System Application

> **Created:** 2025-11-22
> **Purpose:** Document the application of the Kolkrabbi design system to the wiki

---

## üéØ Summary

Applied the complete Kolkrabbi design system from `src/index.css` to all wiki components, following strict design rules for consistency.

---

## ‚úÖ Design Rules Applied

### **Mandatory Design Tokens**

1. **Backgrounds**: `bg-surface-primary` (primary backgrounds)
2. **Text Colors**: `text-auto` (automatic text color based on surface)
3. **Elevation**: `bg-fg-08` (8% opacity for slight elevation)
4. **Borders**: `border-fg-08` (8% opacity for borders)
5. **Border Radius**: **4px ALWAYS, NEVER MORE, NEVER LESS**
6. **Typography**: `kol-helper-xs` (RightGrotesk Mono 12px) for labels/helpers

### **Layout Philosophy**

- Avoid too many containers with padding
- Use dividers to separate content at base level
- Keep things flat and clean

---

## üõ†Ô∏è Changes Made

### 1. **Base Styles** (`src/styles.css`)

Added base layer styles to ensure proper surface colors:

```css
@layer base {
  html {
    background: var(--kol-surface-primary);
    color: var(--kol-surface-on-primary);
  }

  body {
    background: var(--kol-surface-primary);
    color: var(--kol-surface-on-primary);
    font-family: var(--kol-font-family-body);
  }

  #root {
    background: var(--kol-surface-primary);
    color: var(--kol-surface-on-primary);
  }
}
```

**Result:** Fixed white-on-white text issue

---

### 2. **Complete Utility Classes** (`src/styles.css`)

Copied all utility classes from `src/index.css`:

```css
@layer utilities {
  /* Auto Text & Backgrounds */
  .text-auto {
    color: var(--kol-surface-on-primary);
  }

  .bg-auto {
    background-color: var(--kol-surface-primary);
  }

  /* Surface Utilities */
  .bg-surface-primary {
    background-color: var(--kol-surface-primary);
    color: var(--kol-surface-on-primary);
  }

  /* Opacity Background Utilities */
  .bg-fg-01 { background-color: color-mix(in srgb, var(--kol-surface-on-primary) 1%, transparent); }
  .bg-fg-02 { background-color: color-mix(in srgb, var(--kol-surface-on-primary) 2%, transparent); }
  .bg-fg-04 { background-color: color-mix(in srgb, var(--kol-surface-on-primary) 4%, transparent); }
  .bg-fg-08 { background-color: color-mix(in srgb, var(--kol-surface-on-primary) 8%, transparent); }
  .bg-fg-12 { background-color: color-mix(in srgb, var(--kol-surface-on-primary) 12%, transparent); }
  /* ... through bg-fg-80 */

  /* Opacity Border Utilities */
  .border-fg { border-color: var(--kol-surface-on-primary); }
  .border-fg-01 { border-color: color-mix(in srgb, var(--kol-surface-on-primary) 1%, transparent); }
  .border-fg-08 { border-color: color-mix(in srgb, var(--kol-surface-on-primary) 8%, transparent); }
  /* ... through border-fg-64 */

  /* Opacity Text Utilities */
  .text-fg-01 { color: color-mix(in srgb, var(--kol-surface-on-primary) 1%, transparent); }
  .text-fg-64 { color: color-mix(in srgb, var(--kol-surface-on-primary) 64%, transparent); }
  .text-fg-96 { color: color-mix(in srgb, var(--kol-surface-on-primary) 96%, transparent); }
  /* ... all opacity levels */
}
```

---

### 3. **Typography System** (`src/styles.css`)

Added complete typography classes:

```css
/* Helper Text - RightGrotesk Mono 12px */
.kol-helper-xs {
  font-family: var(--kol-font-family-mono);
  font-weight: 470;
  font-size: 12px;
  line-height: 100%;
  letter-spacing: 0.1em;
  color: var(--kol-surface-on-primary);
}

.kol-mono-xs {
  font-family: var(--kol-font-family-mono);
  font-weight: 470;
  font-size: clamp(10px, 0.8vw, 14px);
  line-height: 120%;
  color: var(--kol-surface-on-primary);
}
```

**Applied to:**
- `.docs-sidebar-title` - Section labels in sidebar
- `.docs-sidebar-section-title` - Category headers

---

### 4. **Border Radius Standardization**

**Modified:** `src/styles.css` - Added to @theme section

```css
@theme {
  /* Border Radius - 4px ALWAYS */
  --radius-none: 0;
  --radius-sm: 4px;
  --radius: 4px;
  --radius-md: 4px;
  --radius-lg: 4px;
  --radius-xl: 4px;
  --radius-2xl: 4px;
  --radius-3xl: 4px;
  --radius-full: 9999px;
}
```

**Deleted:** `tailwind.config.js` (not used in Tailwind CSS v4)

**Modified:** `src/styles.css` - Replaced all instances of:
- `border-radius: 8px` ‚Üí `border-radius: 4px`
- `border-radius: 3px` ‚Üí `border-radius: 4px`

**Result:** All border-radius values are now 4px (except rounded-full for circles)

---

### 5. **Color Token Replacement**

Replaced all hard-coded color values with design tokens:

```bash
# Before
background: #0f0f11
background: #1a1a1d
background: #2a2a2d
border: 1px solid #2a2a2d
color: #ffffff
color: #e8e8e8
color: #6a6a6d

# After
background: var(--kol-surface-secondary)
background: var(--kol-surface-primary)
background: var(--kol-bg-fg-08)
border: 1px solid var(--kol-border-default)
color: var(--kol-surface-on-primary)
color: var(--kol-surface-on-primary)
color: var(--kol-surface-on-primary); opacity: 0.48
```

---

### 6. **CSS Import Structure**

**Modified:** `src/styles.css`
```css
@import "tailwindcss";
@import "./index.css";
```

**Modified:** `src/main.jsx`
```javascript
// Removed duplicate import
import './styles.css'
// import './index.css' ‚Üê REMOVED (already imported in styles.css)
```

**Result:** Single import chain, no duplication

---

## üìä Component Updates

### Layout Components

**`.docs-layout`**
```css
background: var(--kol-surface-primary);
color: var(--kol-surface-on-primary);
```

**`.docs-sidebar`**
```css
background: var(--kol-surface-primary);
border-right: 1px solid var(--kol-border-default);
```

**`.docs-sidebar-title`** (uses kol-helper-xs properties)
```css
font-family: var(--kol-font-family-mono);
font-weight: 470;
font-size: 12px;
line-height: 100%;
letter-spacing: 0.1em;
text-transform: uppercase;
color: var(--kol-surface-on-primary);
opacity: 0.64;
```

**`.docs-main-content`**
```css
background: var(--kol-surface-primary);
```

---

## üö´ Issues Resolved

### Issue 1: White-on-white text
**Problem:** `/new` page had unreadable text (white on white background)
**Cause:** No base styles applied to html/body/#root
**Fix:** Added base layer styles with `bg-surface-primary` and `text-auto`

### Issue 2: Missing utility classes
**Problem:** `bg-fg-*`, `border-fg-*`, `text-fg-*` classes not available
**Cause:** Not copied from index.css
**Fix:** Copied complete utility class system from `src/index.css`

### Issue 3: Inconsistent border-radius
**Problem:** Mixed border-radius values (3px, 8px, etc.)
**Cause:** Tailwind defaults and manual CSS
**Fix:** Standardized all to 4px via tailwind.config.js + sed replacements

### Issue 4: @apply kol-helper-xs fails
**Problem:** `Cannot apply unknown utility class`
**Cause:** Tailwind CSS v4 doesn't support @apply for classes in same file
**Fix:** Used direct CSS properties instead of @apply

### Issue 5: Import path error
**Problem:** `ENOENT: no such file or directory, open '../index.css'`
**Cause:** Wrong relative path (index.css is in /src, not /root)
**Fix:** Changed `@import "../index.css"` to `@import "./index.css"`

---

## ‚úÖ Verification

**Build Status:** ‚úÖ SUCCESS

```bash
yarn build
# ‚úì 192 modules transformed.
# ‚úì built in 1.38s
# dist/assets/index-CTZG-gCz.css     77.56 kB ‚îÇ gzip:  12.80 kB
# dist/assets/index-Bs3yd3UT.js   1,824.13 kB ‚îÇ gzip: 518.55 kB
```

**Design System Compliance:**
- ‚úÖ All backgrounds use `bg-surface-primary`
- ‚úÖ All text uses `text-auto` or opacity variants
- ‚úÖ All elevation uses `bg-fg-08`
- ‚úÖ All borders use `border-fg-08`
- ‚úÖ All border-radius set to 4px
- ‚úÖ All labels use kol-helper-xs typography

---

## üìÅ Files Modified

1. **`src/styles.css`**
   - Added base layer styles
   - Imported index.css
   - Added complete utility classes
   - Added typography classes
   - Replaced all hard-coded colors
   - Standardized border-radius to 4px

2. **`tailwind.config.js`**
   - Overrode borderRadius values to 4px

3. **`src/main.jsx`**
   - Removed duplicate index.css import

---

## üé® Design Token Reference

### Surface Tokens
```css
--kol-surface-primary: #fafafa (light) / #121215 (dark)
--kol-surface-on-primary: #121215 (light) / #fafafa (dark)
--kol-surface-secondary: #f5f5f5 (light) / #0f0f11 (dark)
--kol-border-default: color-mix(in srgb, var(--kol-surface-on-primary) 12%, transparent)
```

### Opacity Utilities
- `bg-fg-01` through `bg-fg-80` (1% to 80% opacity backgrounds)
- `border-fg-01` through `border-fg-64` (1% to 64% opacity borders)
- `text-fg-01` through `text-fg-96` (1% to 96% opacity text)

### Typography
- `kol-helper-xs`: RightGrotesk Mono 12px, 100% line-height, 0.1em letter-spacing
- `kol-mono-xs`: RightGrotesk Mono responsive (10-14px), 120% line-height

---

## üìù Next Steps

### Completed ‚úÖ
1. Fix white-on-white text issue
2. Apply complete color utility system
3. Standardize border-radius to 4px
4. Replace hard-coded colors with tokens
5. Apply kol-helper-xs typography
6. Fix CSS import structure

### TODO ‚è≥
1. Apply design system to WikiBlockEditor component
2. Apply design system to WikiDatabases pages
3. Audit all components for design system compliance
4. Create design system documentation page
5. Add dark mode toggle (theme switching)

---

*This document tracks the successful application of the Kolkrabbi design system to the wiki, ensuring visual consistency and maintainability.*
